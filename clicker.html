<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>ADHD Dopamine Clicker - 925 ADHD</title>
  <meta name="description" content="Need instant dopamine? Click the button and watch your brain cells multiply! Perfect for ADHD stimulation seeking.">
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="https://img1.wsimg.com/isteam/ip/e5c52ac6-7189-421d-9701-bbc6d6a027fc/SmartSelect_20241218_055052_Gallery.png/:/rs=h:175,m" sizes="175x175">

  <style>
    :root {
      --primary-bg: #0f1419;
      --secondary-bg: #1a1f2e;
      --card-bg: rgba(255, 255, 255, 0.08);
      --glass-bg: rgba(255, 255, 255, 0.05);
      --text-primary: #ffffff;
      --text-secondary: #a0a8b8;
      --text-muted: #6b7280;
      --accent-primary: #4f46e5;
      --accent-secondary: #06b6d4;
      --accent-success: #10b981;
      --accent-warning: #f59e0b;
      --accent-danger: #ef4444;
      --border-subtle: rgba(255, 255, 255, 0.12);
      --border-bright: rgba(255, 255, 255, 0.2);
      --shadow-soft: 0 4px 24px rgba(0, 0, 0, 0.25);
      --shadow-medium: 0 8px 40px rgba(0, 0, 0, 0.35);
      --shadow-strong: 0 16px 64px rgba(0, 0, 0, 0.45);
      --gradient-primary: linear-gradient(135deg, #4f46e5 0%, #06b6d4 100%);
      --gradient-success: linear-gradient(135deg, #10b981 0%, #06b6d4 100%);
      --gradient-adhd: linear-gradient(135deg, #4f46e5 0%, #06b6d4 50%, #10b981 100%);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; 
      background: var(--primary-bg); 
      color: var(--text-primary); 
      line-height: 1.6; 
      overflow-x: hidden; 
      min-height: 100vh;
      touch-action: manipulation;
      -webkit-text-size-adjust: 100%;
    }

    .bg-gradient { 
      position: fixed; 
      inset: 0; 
      background:
        radial-gradient(ellipse at top, rgba(79,70,229,.1) 0%, transparent 50%),
        radial-gradient(ellipse at bottom right, rgba(16,185,129,.08) 0%, transparent 50%);
      z-index: -1; 
    }

    .container { max-width: 1200px; margin: 0 auto; padding: 0 10px; }

    .header { 
      display: none;
    }

    .app-title {
      display: none;
    }

    .app-subtitle {
      display: none;
    }

    .feature-card {
      background: var(--card-bg);
      border: 2px solid var(--border-subtle);
      border-radius: 15px;
      padding: 15px 10px 15px;
      max-width: 600px;
      margin: 8px auto;
      position: relative;
      overflow: hidden;
      text-align: center;
    }

    .feature-card:hover {
      border-color: var(--accent-secondary);
      box-shadow: var(--shadow-medium);
      transition: all 0.3s ease;
    }

    .feature-title, .feature-description {
      display: none;
    }

    .clicker-display {
      font-size: 3rem;
      font-weight: 900;
      color: var(--accent-success);
      margin: 10px 0;
      text-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
      transition: all 0.3s ease;
    }

    .click-button {
      width: 140px;
      height: 140px;
      border-radius: 50%;
      background: var(--gradient-success);
      color: white;
      border: none;
      font-size: 2rem;
      font-weight: 900;
      cursor: pointer;
      transition: all 0.2s ease;
      margin: 10px auto;
      display: block;
      position: relative;
      overflow: hidden;
      box-shadow: var(--shadow-medium);
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }

    .click-button:hover {
      transform: scale(1.05);
      box-shadow: var(--shadow-strong);
    }

    .click-button:active {
      transform: scale(0.95);
    }

    .click-button::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: all 0.3s ease;
    }

    .click-button.clicked::before {
      width: 100%;
      height: 100%;
    }

    .click-message {
      color: var(--accent-warning);
      font-weight: 600;
      margin: 8px 0;
      min-height: 24px;
      font-size: 0.95rem;
      transition: all 0.3s ease;
    }

    .stats-display {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 10px;
      margin: 12px 0;
    }

    .stat-card {
      background: var(--glass-bg);
      border: 2px solid var(--border-subtle);
      border-radius: 15px;
      padding: 12px;
      text-align: center;
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      border-color: var(--accent-secondary);
      transform: translateY(-2px);
    }

    .stat-number {
      font-size: 1.5rem;
      font-weight: 800;
      color: var(--accent-secondary);
      margin-bottom: 3px;
      transition: all 0.3s ease;
    }

    .stat-label {
      font-size: 0.8rem;
      color: var(--text-muted);
      font-weight: 600;
    }

    .controls {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .reset-confirm-dialog {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      backdrop-filter: blur(10px);
    }

    .reset-confirm-dialog.active {
      display: flex;
    }

    .reset-confirm-content {
      background: var(--secondary-bg);
      border: 2px solid var(--accent-danger);
      border-radius: 20px;
      padding: 30px;
      max-width: 400px;
      width: 90%;
      text-align: center;
      box-shadow: var(--shadow-strong);
    }

    .reset-confirm-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent-danger);
      margin-bottom: 15px;
    }

    .reset-confirm-message {
      color: var(--text-secondary);
      margin-bottom: 25px;
      line-height: 1.6;
    }

    .reset-confirm-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .reset-confirm-btn {
      padding: 12px 30px;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 120px;
    }

    .reset-confirm-yes {
      background: var(--accent-danger);
      color: white;
    }

    .reset-confirm-yes:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-medium);
    }

    .reset-confirm-no {
      background: var(--glass-bg);
      color: var(--text-primary);
      border: 2px solid var(--border-subtle);
    }

    .reset-confirm-no:hover {
      border-color: var(--accent-secondary);
      transform: translateY(-2px);
    }

    .reset-btn, .auto-btn, .sound-btn {
      background: var(--accent-danger);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 10px;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .auto-btn {
      background: var(--accent-primary);
    }

    .auto-btn.active {
      background: var(--accent-warning);
    }

    .sound-btn {
      background: var(--accent-secondary);
    }

    .sound-btn.muted {
      background: var(--text-muted);
    }

    .reset-btn:hover, .auto-btn:hover, .sound-btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-medium);
    }

    .achievements {
      background: var(--glass-bg);
      border: 2px solid var(--border-subtle);
      border-radius: 15px;
      padding: 12px;
      margin-top: 12px;
    }

    .achievement-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      user-select: none;
    }

    .achievement-header:hover {
      opacity: 0.8;
    }

    .achievement-title {
      font-size: 1rem;
      font-weight: 700;
      color: var(--accent-warning);
      margin: 0;
    }

    .achievement-toggle {
      font-size: 1.5rem;
      transition: transform 0.3s ease;
    }

    .achievement-toggle.open {
      transform: rotate(180deg);
    }

    .achievement-list {
      display: grid;
      gap: 6px;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease, margin-top 0.3s ease;
      margin-top: 0;
    }

    .achievement-list.open {
      max-height: 1000px;
      margin-top: 10px;
    }

    .achievement {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px;
      background: var(--secondary-bg);
      border-radius: 8px;
      font-size: 0.8rem;
      transition: all 0.3s ease;
    }

    .achievement.unlocked {
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid var(--accent-success);
    }

    .achievement-emoji {
      font-size: 1.2rem;
    }

    .session-timer {
      position: absolute;
      top: 8px;
      right: 8px;
      background: var(--accent-primary);
      color: white;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .combo-display {
      position: absolute;
      top: 8px;
      left: 8px;
      background: var(--accent-warning);
      color: white;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .combo-display.active {
      opacity: 1;
    }

    .quick-stats {
      background: var(--glass-bg);
      border: 2px solid var(--border-subtle);
      border-radius: 15px;
      padding: 10px;
      margin-top: 10px;
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 10px;
    }

    .quick-stat {
      text-align: center;
    }

    .quick-stat-value {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--accent-primary);
    }

    .quick-stat-label {
      font-size: 0.7rem;
      color: var(--text-muted);
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .pulse {
      animation: pulse 0.3s ease;
    }

    @keyframes confetti {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }

    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      pointer-events: none;
      z-index: 9999;
    }

    @media (max-width: 768px) {
      .container { padding: 0 8px; }
      
      .feature-card { 
        padding: 12px 8px 12px; 
        margin: 5px auto; 
        border-radius: 12px;
      }
      
      .clicker-display { font-size: 2.5rem; margin: 8px 0; }
      
      .click-button { 
        width: 120px; 
        height: 120px; 
        font-size: 1.8rem; 
        margin: 8px auto;
      }
      
      .click-message { font-size: 0.85rem; margin: 6px 0; min-height: 20px; }
      
      .stats-display { 
        grid-template-columns: repeat(2, 1fr); 
        gap: 8px;
        margin: 10px 0;
      }
      
      .stat-card { padding: 10px; }
      .stat-number { font-size: 1.3rem; }
      .stat-label { font-size: 0.75rem; }
      
      .quick-stats { 
        padding: 8px; 
        margin-top: 8px;
        gap: 8px;
      }
      
      .quick-stat-value { font-size: 1.1rem; }
      .quick-stat-label { font-size: 0.65rem; }
      
      .controls { 
        flex-direction: row;
        flex-wrap: wrap;
        align-items: center; 
        gap: 6px;
        margin-top: 10px;
      }
      
      .reset-btn, .auto-btn, .sound-btn {
        padding: 7px 12px;
        font-size: 0.8rem;
        flex: 1 1 auto;
        min-width: 100px;
      }
      
      .session-timer, .combo-display { 
        position: absolute;
        font-size: 0.7rem;
        padding: 3px 8px;
      }
      
      .achievements { 
        margin-top: 10px; 
        padding: 10px;
      }
      
      .achievement-title { font-size: 0.9rem; }
      
      .achievement { 
        padding: 8px 6px; 
        font-size: 0.75rem;
        flex-direction: row;
        gap: 4px;
      }
      
      .achievement-emoji { font-size: 1rem; }
    }
  </style>
</head>
<body>
  <div class="bg-gradient" aria-hidden="true"></div>

  <!-- Main App -->
  <main role="main">
    <div class="container">
      <div class="feature-card">
        <div class="session-timer" id="sessionTimer">0:00</div>
        <div class="combo-display" id="comboDisplay">x0</div>

        <div class="clicker-display" id="clickCount">0</div>
        
        <button class="click-button" id="clickButton" aria-label="Click for dopamine">
          CLICK
        </button>
        
        <div class="click-message" id="clickMessage">Ready to get clicking?</div>

        <div class="stats-display">
          <div class="stat-card">
            <div class="stat-number" id="totalClicks">0</div>
            <div class="stat-label">Total Clicks</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="clicksPerSecond">0</div>
            <div class="stat-label">Clicks/Sec</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="brainCells">0</div>
            <div class="stat-label">Brain Cells</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="bestCPS">0</div>
            <div class="stat-label">Best CPS</div>
          </div>
        </div>

        <div class="quick-stats">
          <div class="quick-stat">
            <div class="quick-stat-value" id="avgCPS">0</div>
            <div class="quick-stat-label">Avg CPS</div>
          </div>
          <div class="quick-stat">
            <div class="quick-stat-value" id="clickStreak">0</div>
            <div class="quick-stat-label">Streak</div>
          </div>
          <div class="quick-stat">
            <div class="quick-stat-value" id="multiplier">x1</div>
            <div class="quick-stat-label">Multiplier</div>
          </div>
        </div>

        <div class="controls">
          <button class="sound-btn" id="soundBtn" aria-label="Toggle sound">üîä Sound ON</button>
          <button class="auto-btn" id="autoBtn" aria-label="Toggle auto mode">Auto Mode: OFF</button>
          <button class="reset-btn" id="resetBtn" aria-label="Reset all progress">Reset All</button>
        </div>

        <div class="achievements">
          <div class="achievement-header" id="achievementHeader">
            <div class="achievement-title">üèÜ Achievements (<span id="achievementCount">0</span>/<span id="totalAchievements">0</span>)</div>
            <div class="achievement-toggle" id="achievementToggle">‚ñº</div>
          </div>
          <div class="achievement-list" id="achievementList">
            <!-- Achievements will be populated by JavaScript -->
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Reset Confirmation Dialog -->
  <div class="reset-confirm-dialog" id="resetDialog">
    <div class="reset-confirm-content">
      <div class="reset-confirm-title">‚ö†Ô∏è Reset All Progress?</div>
      <div class="reset-confirm-message">
        This will delete all your clicks, achievements, and stats. This cannot be undone!
      </div>
      <div class="reset-confirm-buttons">
        <button class="reset-confirm-btn reset-confirm-yes" id="confirmResetYes">Yes, Reset</button>
        <button class="reset-confirm-btn reset-confirm-no" id="confirmResetNo">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    // State Management
    let clickCount = 0;
    let totalClicks = 0;
    let brainCells = 0;
    let clickTimes = [];
    let bestCPS = 0;
    let sessionStart = Date.now();
    let autoMode = false;
    let autoInterval = null;
    let achievements = {};
    let soundEnabled = true;
    let combo = 0;
    let comboTimeout = null;
    let multiplier = 1;
    let streak = 0;
    let lastClickTime = 0;
    let totalCPSReadings = [];

    // Click Messages
    const clickMessages = [
      "+1 Brain Cell Saved! üß†",
      "Dopamine Delivered! ‚ö°",
      "Click Power Activated! üí™",
      "ADHD Mode: ON! üî•",
      "Focus +1! üéØ",
      "Hyperfocus Charging... ‚ö°",
      "Serotonin Boost! üåü",
      "Productivity Unlocked! üîì",
      "Mental Energy +1! ‚ö°",
      "Brain Zoomies! üèÉ‚Äç‚ôÇÔ∏è",
      "Neurotransmitter Party! üéâ",
      "Click Combo! üí•",
      "ADHD Brain Go Brrrr! üöÄ",
      "Stimulation Successful! ‚ú®",
      "Endorphin Rush! üåà",
      "Neuron Firing! ‚ö°",
      "Executive Function +1! üìä",
      "Working Memory Boost! üí≠",
      "Attention Span Extended! ‚è∞",
      "Motivation Unlocked! üîë"
    ];

    // Achievement Definitions
    const achievementData = [
      { id: 'first_click', name: 'First Click', desc: 'Click once', threshold: 1, emoji: 'üëÜ' },
      { id: 'getting_started', name: 'Getting Started', desc: 'Click 10 times', threshold: 10, emoji: 'üéØ' },
      { id: 'warming_up', name: 'Warming Up', desc: 'Click 50 times', threshold: 50, emoji: 'üî•' },
      { id: 'century', name: 'Century Club', desc: 'Click 100 times', threshold: 100, emoji: 'üíØ' },
      { id: 'dedicated', name: 'Dedicated Clicker', desc: 'Click 500 times', threshold: 500, emoji: '‚≠ê' },
      { id: 'thousand', name: 'Click Master', desc: 'Click 1,000 times', threshold: 1000, emoji: 'üéØ' },
      { id: 'marathon', name: 'Click Marathon', desc: 'Click 10,000 times', threshold: 10000, emoji: 'üèÉ‚Äç‚ôÇÔ∏è' },
      { id: 'legend', name: 'Legendary Clicker', desc: 'Click 100,000 times', threshold: 100000, emoji: 'üëë' },
      { id: 'speed_demon', name: 'Speed Demon', desc: '10+ clicks per second', threshold: 10, emoji: '‚ö°', type: 'cps' },
      { id: 'hyperfocus', name: 'Hyperfocus Mode', desc: '20+ clicks per second', threshold: 20, emoji: 'üî•', type: 'cps' },
      { id: 'superhuman', name: 'Superhuman Speed', desc: '30+ clicks per second', threshold: 30, emoji: 'üí´', type: 'cps' },
      { id: 'brain_genius', name: 'Brain Genius', desc: 'Save 100+ brain cells', threshold: 100, emoji: 'üß†', type: 'brain' },
      { id: 'brain_lord', name: 'Brain Lord', desc: 'Save 1,000+ brain cells', threshold: 1000, emoji: 'üß†', type: 'brain' },
      { id: 'combo_starter', name: 'Combo Starter', desc: 'Reach 10x combo', threshold: 10, emoji: 'üîó', type: 'combo' },
      { id: 'combo_master', name: 'Combo Master', desc: 'Reach 50x combo', threshold: 50, emoji: 'üîó', type: 'combo' },
      { id: 'streak_5min', name: 'Persistent', desc: 'Click for 5 minutes', threshold: 300, emoji: '‚è±Ô∏è', type: 'session' }
    ];

    // Sound Effects (using Web Audio API for better ADHD feedback)
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    
    function playClickSound(pitch = 1.0) {
      if (!soundEnabled) return;
      
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      
      oscillator.frequency.value = 400 * pitch;
      oscillator.type = 'sine';
      
      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
      
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.1);
    }

    function playAchievementSound() {
      if (!soundEnabled) return;
      
      const notes = [523.25, 659.25, 783.99]; // C, E, G (major chord)
      notes.forEach((freq, i) => {
        setTimeout(() => {
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);
          
          oscillator.frequency.value = freq;
          oscillator.type = 'sine';
          
          gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
          
          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 0.3);
        }, i * 100);
      });
    }

    // Core Click Function
    function incrementClick() {
      const now = Date.now();
      
      // Update streak
      if (now - lastClickTime < 2000) {
        streak++;
      } else {
        streak = 1;
      }
      lastClickTime = now;
      
      // Update combo
      combo++;
      multiplier = Math.min(Math.floor(combo / 10) + 1, 10);
      updateComboDisplay();
      clearTimeout(comboTimeout);
      comboTimeout = setTimeout(() => {
        combo = 0;
        multiplier = 1;
        updateComboDisplay();
      }, 2000);
      
      // Apply multiplier
      const clickValue = multiplier;
      clickCount += clickValue;
      totalClicks += clickValue;
      brainCells = Math.floor(totalClicks / 10);
      
      // Play sound with pitch variation
      const pitch = 1 + (multiplier - 1) * 0.1;
      playClickSound(pitch);
      
      updateDisplays();
      showClickMessage();
      updateClicksPerSecond();
      checkAchievements();
      saveProgress();
      animateClick();
      
      // Confetti for milestones
      if (totalClicks % 100 === 0) {
        createConfetti();
      }
    }

    // Display Updates
    function updateDisplays() {
      document.getElementById('clickCount').textContent = clickCount.toLocaleString();
      document.getElementById('totalClicks').textContent = totalClicks.toLocaleString();
      document.getElementById('brainCells').textContent = brainCells.toLocaleString();
      document.getElementById('bestCPS').textContent = bestCPS;
      document.getElementById('clickStreak').textContent = streak;
      document.getElementById('multiplier').textContent = 'x' + multiplier;
      
      // Calculate average CPS
      if (totalCPSReadings.length > 0) {
        const avgCPS = (totalCPSReadings.reduce((a, b) => a + b, 0) / totalCPSReadings.length).toFixed(1);
        document.getElementById('avgCPS').textContent = avgCPS;
      }
    }

    function updateComboDisplay() {
      const comboEl = document.getElementById('comboDisplay');
      comboEl.textContent = `x${combo}`;
      
      if (combo > 0) {
        comboEl.classList.add('active');
      } else {
        comboEl.classList.remove('active');
      }
    }

    function showClickMessage() {
      const randomMessage = clickMessages[Math.floor(Math.random() * clickMessages.length)];
      const messageEl = document.getElementById('clickMessage');
      
      // Add multiplier bonus message
      let message = randomMessage;
      if (multiplier > 1) {
        message += ` [x${multiplier}]`;
      }
      
      messageEl.textContent = message;
      messageEl.style.transform = 'scale(1.1)';
      messageEl.style.color = `hsl(${Math.random() * 360}, 70%, 60%)`;
      
      setTimeout(() => {
        messageEl.style.transform = 'scale(1)';
        messageEl.style.color = 'var(--accent-warning)';
      }, 300);
    }

    function updateClicksPerSecond() {
      const now = Date.now();
      clickTimes.push(now);
      clickTimes = clickTimes.filter(time => now - time < 1000);
      
      const currentCPS = clickTimes.length;
      document.getElementById('clicksPerSecond').textContent = currentCPS;
      
      // Track CPS for average calculation
      if (currentCPS > 0) {
        totalCPSReadings.push(currentCPS);
        if (totalCPSReadings.length > 100) {
          totalCPSReadings.shift();
        }
      }
      
      if (currentCPS > bestCPS) {
        bestCPS = currentCPS;
        localStorage.setItem('bestCPS', bestCPS.toString());
        
        const cpsEl = document.getElementById('clicksPerSecond');
        cpsEl.style.color = 'var(--accent-success)';
        cpsEl.style.transform = 'scale(1.2)';
        
        setTimeout(() => {
          cpsEl.style.color = 'var(--accent-secondary)';
          cpsEl.style.transform = 'scale(1)';
        }, 1000);
      }
    }

    function animateClick() {
      const button = document.getElementById('clickButton');
      const display = document.getElementById('clickCount');
      
      // Button animation with color variation
      button.classList.add('clicked');
      const hue = (multiplier - 1) * 30 + 150; // Color changes with multiplier
      button.style.background = `hsl(${hue}, 70%, 50%)`;
      
      setTimeout(() => {
        button.classList.remove('clicked');
        button.style.background = '';
      }, 200);
      
      // Number scale animation
      display.classList.add('pulse');
      setTimeout(() => {
        display.classList.remove('pulse');
      }, 300);
    }

    // Controls
    function toggleAuto() {
      autoMode = !autoMode;
      const autoBtn = document.getElementById('autoBtn');
      
      if (autoMode) {
        autoBtn.textContent = 'Auto Mode: ON';
        autoBtn.classList.add('active');
        autoInterval = setInterval(() => {
          incrementClick();
        }, 100);
      } else {
        autoBtn.textContent = 'Auto Mode: OFF';
        autoBtn.classList.remove('active');
        clearInterval(autoInterval);
      }
    }

    function toggleSound() {
      soundEnabled = !soundEnabled;
      const soundBtn = document.getElementById('soundBtn');
      
      if (soundEnabled) {
        soundBtn.textContent = 'üîä Sound ON';
        soundBtn.classList.remove('muted');
        playClickSound();
      } else {
        soundBtn.textContent = 'üîá Sound OFF';
        soundBtn.classList.add('muted');
      }
      
      localStorage.setItem('soundEnabled', soundEnabled.toString());
    }

    function resetClicker() {
      // Show custom dialog
      document.getElementById('resetDialog').classList.add('active');
    }

    function confirmReset() {
      // Stop auto mode if running
      if (autoMode) toggleAuto();
      
      // Clear all state
      clickCount = 0;
      totalClicks = 0;
      brainCells = 0;
      clickTimes = [];
      bestCPS = 0;
      achievements = {};
      sessionStart = Date.now();
      combo = 0;
      multiplier = 1;
      streak = 0;
      totalCPSReadings = [];
      lastClickTime = 0;
      
      // Clear all localStorage
      localStorage.clear();
      
      // Restore sound preference (don't reset this)
      localStorage.setItem('soundEnabled', soundEnabled.toString());
      
      // Update all displays
      updateDisplays();
      updateComboDisplay();
      updateAchievements();
      
      // Reset message
      document.getElementById('clickMessage').textContent = 'Fresh start! Time to rebuild those brain cells!';
      
      // Reset session timer display
      document.getElementById('sessionTimer').textContent = '0:00';
      
      // Close dialog
      document.getElementById('resetDialog').classList.remove('active');
    }

    function cancelReset() {
      // Close dialog
      document.getElementById('resetDialog').classList.remove('active');
    }

    // Achievements
    function checkAchievements() {
      achievementData.forEach(achievement => {
        if (achievements[achievement.id]) return;
        
        let threshold = achievement.threshold;
        let current = totalClicks;
        
        if (achievement.type === 'cps') {
          current = bestCPS;
        } else if (achievement.type === 'brain') {
          current = brainCells;
        } else if (achievement.type === 'combo') {
          current = combo;
        } else if (achievement.type === 'session') {
          current = Math.floor((Date.now() - sessionStart) / 1000);
        }
        
        if (current >= threshold) {
          achievements[achievement.id] = true;
          showAchievementUnlock(achievement);
          playAchievementSound();
          createConfetti(20);
        }
      });
      
      updateAchievements();
    }

    function showAchievementUnlock(achievement) {
      const messageEl = document.getElementById('clickMessage');
      const originalText = messageEl.textContent;
      
      messageEl.textContent = `üèÜ Achievement Unlocked: ${achievement.name}!`;
      messageEl.style.color = 'var(--accent-success)';
      messageEl.style.fontWeight = '700';
      messageEl.style.fontSize = '1.3rem';
      
      setTimeout(() => {
        messageEl.textContent = originalText;
        messageEl.style.color = 'var(--accent-warning)';
        messageEl.style.fontWeight = '600';
        messageEl.style.fontSize = '1.1rem';
      }, 3000);
    }

    function updateAchievements() {
      const achievementList = document.getElementById('achievementList');
      const unlockedCount = Object.keys(achievements).length;
      
      document.getElementById('achievementCount').textContent = unlockedCount;
      document.getElementById('totalAchievements').textContent = achievementData.length;
      
      achievementList.innerHTML = achievementData.map(achievement => {
        const isUnlocked = achievements[achievement.id];
        const progress = getAchievementProgress(achievement);
        
        return `
          <div class="achievement ${isUnlocked ? 'unlocked' : ''}">
            <div>
              <span class="achievement-emoji">${achievement.emoji}</span>
              <strong>${achievement.name}</strong> - ${achievement.desc}
            </div>
            <div style="font-size: 0.8rem; color: var(--text-muted);">
              ${isUnlocked ? '‚úÖ DONE' : progress}
            </div>
          </div>
        `;
      }).join('');
    }

    function getAchievementProgress(achievement) {
      let current = totalClicks;
      
      if (achievement.type === 'cps') {
        current = bestCPS;
      } else if (achievement.type === 'brain') {
        current = brainCells;
      } else if (achievement.type === 'combo') {
        current = combo;
      } else if (achievement.type === 'session') {
        current = Math.floor((Date.now() - sessionStart) / 1000);
      }
      
      const percentage = Math.min((current / achievement.threshold * 100), 100).toFixed(0);
      return `${percentage}%`;
    }

    // Visual Effects
    function createConfetti(count = 10) {
      for (let i = 0; i < count; i++) {
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.left = Math.random() * 100 + '%';
          confetti.style.background = `hsl(${Math.random() * 360}, 70%, 60%)`;
          confetti.style.animation = `confetti ${1 + Math.random()}s linear forwards`;
          document.body.appendChild(confetti);
          
          setTimeout(() => confetti.remove(), 2000);
        }, i * 50);
      }
    }

    // Session Timer
    function updateSessionTimer() {
      const elapsed = Math.floor((Date.now() - sessionStart) / 1000);
      const minutes = Math.floor(elapsed / 60);
      const seconds = elapsed % 60;
      
      document.getElementById('sessionTimer').textContent = 
        `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }

    // Data Persistence
    function saveProgress() {
      try {
        localStorage.setItem('clickCount', clickCount.toString());
        localStorage.setItem('totalClicks', totalClicks.toString());
        localStorage.setItem('brainCells', brainCells.toString());
        localStorage.setItem('bestCPS', bestCPS.toString());
        localStorage.setItem('achievements', JSON.stringify(achievements));
        localStorage.setItem('soundEnabled', soundEnabled.toString());
        localStorage.setItem('totalCPSReadings', JSON.stringify(totalCPSReadings));
      } catch (e) {
        console.error('Error saving progress:', e);
      }
    }

    function loadProgress() {
      try {
        clickCount = parseInt(localStorage.getItem('clickCount') || '0');
        totalClicks = parseInt(localStorage.getItem('totalClicks') || '0');
        brainCells = parseInt(localStorage.getItem('brainCells') || '0');
        bestCPS = parseInt(localStorage.getItem('bestCPS') || '0');
        soundEnabled = localStorage.getItem('soundEnabled') !== 'false';
        
        const savedAchievements = localStorage.getItem('achievements');
        if (savedAchievements) {
          achievements = JSON.parse(savedAchievements);
        }
        
        const savedCPSReadings = localStorage.getItem('totalCPSReadings');
        if (savedCPSReadings) {
          totalCPSReadings = JSON.parse(savedCPSReadings);
        }
        
        updateDisplays();
        updateAchievements();
        
        // Update sound button
        const soundBtn = document.getElementById('soundBtn');
        if (!soundEnabled) {
          soundBtn.textContent = 'üîá Sound OFF';
          soundBtn.classList.add('muted');
        }
      } catch (e) {
        console.error('Error loading progress:', e);
      }
    }

    // Event Listeners
    document.getElementById('clickButton').addEventListener('click', incrementClick);
    document.getElementById('autoBtn').addEventListener('click', toggleAuto);
    document.getElementById('soundBtn').addEventListener('click', toggleSound);
    document.getElementById('resetBtn').addEventListener('click', resetClicker);
    document.getElementById('confirmResetYes').addEventListener('click', confirmReset);
    document.getElementById('confirmResetNo').addEventListener('click', cancelReset);

    // Achievement dropdown toggle
    document.getElementById('achievementHeader').addEventListener('click', function() {
      const list = document.getElementById('achievementList');
      const toggle = document.getElementById('achievementToggle');
      
      list.classList.toggle('open');
      toggle.classList.toggle('open');
      
      // Save state
      localStorage.setItem('achievementsOpen', list.classList.contains('open').toString());
    });

    // Close dialog when clicking outside
    document.getElementById('resetDialog').addEventListener('click', function(e) {
      if (e.target.id === 'resetDialog') {
        cancelReset();
      }
    });

    // Keyboard support (ADHD-friendly: spacebar and enter)
    document.addEventListener('keydown', function(e) {
      if ((e.key === ' ' || e.key === 'Enter') && e.target.tagName !== 'BUTTON') {
        e.preventDefault();
        incrementClick();
      }
    });

    // Prevent double-tap zoom on mobile
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function(e) {
      const now = Date.now();
      if (now - lastTouchEnd <= 300) {
        e.preventDefault();
      }
      lastTouchEnd = now;
    }, false);

    // Initialize
    loadProgress();
    updateAchievements();
    setInterval(updateSessionTimer, 1000);
    setInterval(saveProgress, 5000);
    
    // Check achievements periodically
    setInterval(checkAchievements, 1000);
    
    // Load achievement dropdown state
    const achievementsOpen = localStorage.getItem('achievementsOpen') === 'true';
    if (achievementsOpen) {
      document.getElementById('achievementList').classList.add('open');
      document.getElementById('achievementToggle').classList.add('open');
    }
  </script>
</body>
</html>
