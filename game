<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<title>GIR's ADHD Adventures</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Comic Sans MS',cursive;background:linear-gradient(45deg,#0a0a0a,#1a4a1a,#2a1a4a,#4a1a2a);background-size:400% 400%;animation:bg 10s ease infinite;min-height:100vh;overflow:hidden;color:#0f0;touch-action:none;user-select:none}
@keyframes bg{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.gc{position:relative;width:100vw;height:100vh;overflow:hidden}
.gir{position:absolute;width:60px;height:75px;cursor:pointer;transition:transform .1s;z-index:100;will-change:transform;animation:breathe 2s ease-in-out infinite;pointer-events:none}
.gn,.gd{width:100%;height:100%;object-fit:contain;pointer-events:none}
.gn{display:block}.gd{display:none}
.gir.disguise .gn{display:none}.gir.disguise .gd{display:block}
@keyframes breathe{0%,100%{transform:scale(1)}50%{transform:scale(1.02)}}
.gir.resting{filter:brightness(.7);animation:rest 3s ease-in-out infinite}
@keyframes rest{0%,100%{transform:scale(1)}50%{transform:scale(.95)}}
.gir.game-over{filter:grayscale(50%) brightness(.5);animation:over 2s ease-in-out infinite}
@keyframes over{0%,100%{opacity:1}50%{opacity:.3}}
.dist{position:absolute;width:40px;height:40px;border-radius:50%;animation:pulse 2s infinite,float 3s ease-in-out infinite;transition:all .3s;will-change:transform;pointer-events:none}
@keyframes pulse{0%,100%{opacity:.7}50%{opacity:1}}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
.taco{background:#D2691E;border-radius:60% 40% 40% 60%;box-shadow:0 0 15px #FFD700;display:flex;align-items:center;justify-content:center;font-size:28px}
.taco::before{content:"üåÆ"}
.shiny{background:radial-gradient(circle,#FFD700,#FFA500);box-shadow:0 0 20px #FFD700;animation:sparkle 1s infinite;display:flex;align-items:center;justify-content:center;font-size:24px}
.shiny::before{content:"‚ú®"}
@keyframes sparkle{0%,100%{transform:rotate(0deg) scale(1)}50%{transform:rotate(180deg) scale(1.1)}}
.rubber{background:#FF1493;border-radius:50%;box-shadow:0 0 15px #DC143C;display:flex;align-items:center;justify-content:center;font-size:24px}
.rubber::before{content:"üêñ"}
.waffles{background:#DEB887;border-radius:20%;box-shadow:inset 0 0 10px #8B4513,0 0 10px #F5DEB3;display:flex;align-items:center;justify-content:center;font-size:24px}
.waffles::before{content:"üßá"}
.ui{position:absolute;top:10px;left:10px;z-index:200;background:rgba(0,20,0,.9);padding:12px;border-radius:8px;box-shadow:0 4px 15px rgba(0,255,0,.3);border:2px solid #0f0;color:#0f0;font-size:12px}
.ui h3{display:flex;align-items:center;gap:8px;margin-bottom:8px}
.gir-head{width:24px;height:24px;position:relative;display:inline-block}
.gir-head::before{content:'';position:absolute;width:24px;height:20px;background:linear-gradient(135deg,#2dd,#1aa);border-radius:50% 50% 45% 45%;top:0;left:0;border:2px solid #0f0}
.gir-head::after{content:'';position:absolute;width:6px;height:3px;background:#f84;border-radius:50%;top:14px;left:9px;box-shadow:0 0 3px #f84}
.gir-eyes{position:absolute;top:4px;left:3px;width:18px;height:8px}
.gir-eyes::before,.gir-eyes::after{content:'';position:absolute;width:6px;height:6px;background:radial-gradient(circle,#f48,#f06);border-radius:50%;animation:blink 3s infinite}
.gir-eyes::before{left:0}
.gir-eyes::after{right:0}
@keyframes blink{0%,90%,100%{transform:scaleY(1)}95%{transform:scaleY(.1)}}
.meter{width:120px;height:15px;background:#011;border-radius:8px;margin:3px 0;overflow:hidden;border:1px solid #0f0}
.mf{height:100%;transition:width .5s;border-radius:8px}
.cf{background:linear-gradient(90deg,#f04,#f48,#f8c)}
.ef{background:linear-gradient(90deg,#0f0,#4f4,#8f8)}
.df{background:linear-gradient(90deg,#ff0,#ff4,#ff8)}
.hs{color:#FFD700;font-weight:bold;animation:hsg 2s infinite}
@keyframes hsg{0%,100%{text-shadow:0 0 5px #FFD700}50%{text-shadow:0 0 15px #FFD700,0 0 25px #FFD700}}
.ctrl{position:absolute;bottom:20px;left:20px;background:rgba(0,20,0,.9);padding:15px;border-radius:10px;border:2px solid #0f0;color:#0f0;z-index:200;display:none}
.ui-toggle{position:fixed;bottom:20px;left:20px;z-index:300}
.mc{position:fixed;bottom:20px;right:20px;z-index:300;display:block}
.jc{position:relative;width:100px;height:100px;background:rgba(0,50,0,.8);border:3px solid #0f0;border-radius:50%;margin-bottom:10px;touch-action:none}
.js{position:absolute;width:30px;height:30px;background:#0f0;border-radius:50%;top:50%;left:50%;transform:translate(-50%,-50%);transition:none;box-shadow:0 0 10px #0f0;touch-action:none}
.mb{display:flex;gap:8px;justify-content:center;flex-wrap:wrap}
.btn{width:45px;height:45px;background:rgba(0,50,0,.8);border:2px solid #0f0;border-radius:50%;color:#0f0;font-size:18px;display:flex;align-items:center;justify-content:center;user-select:none;touch-action:manipulation;font-weight:bold}
.btn:active{background:rgba(0,255,0,.3);transform:scale(.95)}
.rb{background:rgba(100,100,100,.8);border-color:#888;color:#888}
.rb.av{background:rgba(0,100,200,.8);border-color:#08f;color:#08f;animation:rp 2s infinite}
@keyframes rp{0%,100%{box-shadow:0 0 5px #08f}50%{box-shadow:0 0 15px #08f,0 0 25px #08f}}
.tl{position:absolute;top:10px;right:10px;background:rgba(0,20,0,.9);padding:12px;border-radius:8px;box-shadow:0 4px 15px rgba(0,255,0,.3);border:2px solid #0f0;max-width:200px;z-index:200;color:#0f0;font-size:11px}
.task{padding:4px;margin:2px 0;border-radius:4px;transition:all .3s}
.task.completed{background:rgba(0,255,0,.2);text-decoration:line-through}
.task.current{background:rgba(255,255,0,.2);font-weight:bold;animation:tg 2s infinite}
@keyframes tg{0%,100%{box-shadow:0 0 5px rgba(255,255,0,.5)}50%{box-shadow:0 0 15px rgba(255,255,0,1)}}
.gos{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.9);display:none;justify-content:center;align-items:center;z-index:500;color:#f04;text-align:center}
.goc{background:rgba(20,0,0,.9);padding:30px;border-radius:15px;border:3px solid #f04;animation:gog 2s ease-in-out infinite;max-width:90%}
@keyframes gog{0%,100%{box-shadow:0 0 20px #f04}50%{box-shadow:0 0 40px #f04,0 0 60px #f04}}
.got{font-size:28px;margin-bottom:15px;color:#f04}
.fs{font-size:20px;margin:12px 0;color:#0f0}
.nhs{color:#FFD700;animation:nhsg 1s infinite}
@keyframes nhsg{0%,100%{text-shadow:0 0 10px #FFD700}50%{text-shadow:0 0 20px #FFD700,0 0 30px #FFD700}}
.rstb{background:#0f0;color:#000;border:none;padding:12px 25px;font-size:16px;border-radius:8px;cursor:pointer;margin-top:15px;font-family:inherit;font-weight:bold}
.rstb:hover{background:#4f4;transform:scale(1.05)}
.cm{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(255,0,64,.9);display:none;justify-content:center;align-items:center;z-index:400;animation:cf 1s infinite}
@keyframes cf{0%{background:rgba(255,0,64,.9)}25%{background:rgba(0,255,0,.7)}50%{background:rgba(255,255,0,.8)}75%{background:rgba(0,255,255,.7)}100%{background:rgba(255,0,64,.9)}}
.ca{background:#000;color:#f04;padding:30px;border-radius:15px;text-align:center;border:3px solid #0f0;animation:cg 1s ease-in-out infinite;max-width:90%}
@keyframes cg{0%,100%{box-shadow:0 0 20px #f04;transform:scale(1)}50%{box-shadow:0 0 40px #0f0;transform:scale(1.05)}}
.ct{font-size:36px;font-weight:bold;color:#0f0;margin:15px 0;text-shadow:0 0 10px #0f0}
.ci{font-size:16px;margin:12px 0;color:#fff}
.cpb{width:100%;height:18px;background:#333;border-radius:8px;margin:15px 0;overflow:hidden;border:2px solid #0f0}
.cpf{height:100%;background:linear-gradient(90deg,#f04,#f48,#0f0);transition:width .1s;animation:pg .5s infinite}
@keyframes pg{0%,100%{box-shadow:inset 0 0 10px rgba(0,255,0,.5)}50%{box-shadow:inset 0 0 20px rgba(0,255,0,1)}}
.mission-hint{position:fixed;top:10px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#0f0;padding:8px 12px;border-radius:20px;font-size:24px;border:2px solid #0f0;z-index:400;display:block;animation:pulse 2s infinite}
.gs{position:fixed;top:120px;left:50%;transform:translateX(-50%);background:#000;color:#0f0;padding:12px 20px;border-radius:20px;font-weight:bold;border:2px solid #0f0;animation:sb .5s ease;z-index:500;display:none;max-width:280px;text-align:center;font-size:14px}
@keyframes sb{0%{transform:translateX(-50%) scale(0)}100%{transform:translateX(-50%) scale(1)}}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.6}}
.gir.hyperactive{animation:gb .3s infinite}
@keyframes gb{0%,100%{transform:translateY(0) rotate(0deg)}25%{transform:translateY(-15px) rotate(-5deg)}75%{transform:translateY(-15px) rotate(5deg)}}
.gir.distracted{filter:blur(1px);animation:gw .5s infinite}
@keyframes gw{0%,100%{transform:rotate(0deg)}25%{transform:rotate(-8deg)}75%{transform:rotate(8deg)}}
.stars{position:absolute;width:2px;height:2px;background:#fff;border-radius:50%;animation:tw 2s infinite}
@keyframes tw{0%,100%{opacity:.3}50%{opacity:1}}
.fp{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.9);color:#0f0;padding:15px;border-radius:12px;border:2px solid #0f0;font-size:20px;font-weight:bold;z-index:600;animation:pf 2s ease-in-out;pointer-events:none}
@keyframes pf{0%{opacity:0;transform:translate(-50%,-50%) scale(.5)}20%{opacity:1;transform:translate(-50%,-50%) scale(1.1)}80%{opacity:1;transform:translate(-50%,-50%) scale(1)}100%{opacity:0;transform:translate(-50%,-50%) scale(.9)}}

/* Mobile optimizations */
@media (max-width:768px){
.gir{width:50px;height:65px}
.dist{width:35px;height:35px}
.ui{top:5px;left:5px;padding:6px;font-size:9px;background:rgba(0,20,0,.7);max-width:140px}
.ui h3{margin-bottom:4px}
.gir-head{width:18px;height:18px}
.gir-head::before{width:18px;height:15px}
.gir-head::after{width:4px;height:2px;top:11px;left:7px}
.gir-eyes{top:3px;left:2px;width:14px;height:6px}
.gir-eyes::before,.gir-eyes::after{width:4px;height:4px}
.meter{width:80px;height:10px}
.tl{top:5px;right:5px;padding:6px;font-size:9px;max-width:120px;background:rgba(0,20,0,.7)}
.mc{bottom:15px;right:15px}
.ui-toggle{bottom:15px;left:15px}
.jc{width:90px;height:90px}
.js{width:25px;height:25px}
.btn{width:40px;height:40px;font-size:16px}
.gs{font-size:12px;padding:8px 15px;max-width:250px;top:80px}
.mission-hint{font-size:20px;padding:6px 10px;top:8px}
.task{padding:2px;margin:1px 0;font-size:8px}
.ctrl{display:none !important}
}

@media (max-width:480px){
.gir{width:45px;height:60px}
.dist{width:32px;height:32px;font-size:20px}
.ui{font-size:8px;padding:4px;max-width:120px;background:rgba(0,15,0,.6)}
.gir-head{width:16px;height:16px}
.gir-head::before{width:16px;height:13px}
.gir-head::after{width:3px;height:2px;top:9px;left:6px}
.gir-eyes{top:2px;left:2px;width:12px;height:5px}
.gir-eyes::before,.gir-eyes::after{width:3px;height:3px}
.meter{width:70px;height:8px}
.tl{font-size:8px;padding:4px;max-width:110px;background:rgba(0,15,0,.6)}
.mc{bottom:10px;right:10px}
.ui-toggle{bottom:10px;left:10px}
.jc{width:80px;height:80px}
.js{width:22px;height:22px}
.btn{width:36px;height:36px;font-size:14px}
.got{font-size:24px}
.fs{font-size:18px}
.ct{font-size:28px}
.ci{font-size:14px}
.mission-hint{font-size:18px;padding:5px 8px;top:5px}
.task{font-size:7px;padding:1px}
}
</style>
</head>
<body>
<div class="gc">
<div class="gir" id="g">
<img class="gn" src="https://img1.wsimg.com/isteam/ip/e5c52ac6-7189-421d-9701-bbc6d6a027fc/GIR_open_mouth.webp/:/rs=h:175,m" alt="Normal GIR">
<img class="gd" src="https://img1.wsimg.com/isteam/ip/e5c52ac6-7189-421d-9701-bbc6d6a027fc/d1me5u2-a9635d79-16f1-474e-8fd2-428380d93f53.png/:/rs=h:175,m" alt="Disguise GIR">
</div>
<div class="ui">
<h3>ü§ñ GIR Status</h3>
<div>Chaos:<div class="meter"><div class="mf cf" id="cm"></div></div></div>
<div>Energy:<div class="meter"><div class="mf ef" id="em"></div></div></div>
<div>Distraction:<div class="meter"><div class="mf df" id="dm"></div></div></div>
<div>Score: <span id="sc">0</span></div>
<div class="hs">High: <span id="hs">0</span></div>
<div>Time: <span id="tm">0</span>s</div>
<div style="font-size:9px;margin-top:3px">
<div>Tasks: <span id="tc">0</span> | Items: <span id="ic">0</span></div>
<div id="gst">Active</div>
</div>
</div>
<div class="ctrl">
<h4>üéÆ Controls</h4>
<div>Arrows: Move</div>
<div>Space: Dance/Action</div>
<div>Click: Dance</div>
<div>D: Dog Disguise (Stealth Mode!)</div>
<div>R: Rest (Restore Energy)</div>
<div style="font-size:10px;margin-top:5px;color:#888">
Mobile: üíÉ=Dance/Action, üêï=Dog Disguise, üò¥=Rest<br>
‚ö†Ô∏è ONLY collect items matching your mission!<br>
Wrong items = BIG energy penalty!<br><br>
üå™Ô∏è CHAOS SYSTEM:<br>
- High chaos = faster energy drain & erratic movement<br>
- 100 chaos = DOOM SONG mode!<br><br>
üòµ‚Äçüí´ DISTRACTION SYSTEM:<br>
- High distraction = inaccurate movement<br>
- 80+ distraction = wrong direction inputs!<br><br>
üêï Dog mode: Slower movement but better control,<br>
less chaos/distraction, reduced penalties.
</div>
</div>
<div class="mc">
<div class="jc" id="jc"><div class="js" id="js"></div></div>
<div class="mb">
<div class="btn" id="ab">üíÉ</div>
<div class="btn" id="db">üêï</div>
<div class="btn rb" id="rb">üò¥</div>
</div>
</div>
<div class="ui-toggle" id="tb">
<div class="btn" style="background:rgba(50,50,0,.8);border-color:#aa0;color:#aa0">üëÅÔ∏è</div>
</div>
<div class="tl">
<h4><span id="me">üåÆ</span> Mission</h4>
<div id="tkc"></div>
</div>
<div class="gos" id="gos">
<div class="goc">
<div class="got">GIR.EXE STOPPED</div>
<div>üíÄ OVERLOAD üíÄ</div>
<div class="fs">Score: <span id="fs">0</span></div>
<div id="hsm"></div>
<div style="margin:15px 0;color:#888">GIR ran out of energy!<br>Remember to rest!</div>
<button class="rstb" onclick="restart()">REBOOT</button>
</div>
</div>
<div class="cm" id="cm2">
<div class="ca">
<h2>ü§ñ CHAOS MODE! ü§ñ</h2>
<div class="ci">DOOM SONG!</div>
<div class="ct" id="ct2">10</div>
<div class="ci">TAP TO CALM!<br><small>Each tap = -1 sec</small></div>
<div class="cpb"><div class="cpf" id="cpf"></div></div>
<div style="color:#0f0;font-size:12px" id="ds">"Doom..."</div>
</div>
</div>
<div class="mission-hint" id="mh">üåÆ</div>
<div class="gs" id="gs"></div>
</div>
<script>
class G{
constructor(){
this.g=document.getElementById('g');this.gc=document.querySelector('.gc');
this.ui={sc:document.getElementById('sc'),tm:document.getElementById('tm'),tc:document.getElementById('tc'),ic:document.getElementById('ic'),cm:document.getElementById('cm'),em:document.getElementById('em'),dm:document.getElementById('dm'),gs:document.getElementById('gs'),tkc:document.getElementById('tkc'),cm2:document.getElementById('cm2'),ct2:document.getElementById('ct2'),cpf:document.getElementById('cpf'),ds:document.getElementById('ds'),gst:document.getElementById('gst'),hs:document.getElementById('hs'),gos:document.getElementById('gos'),fs:document.getElementById('fs'),hsm:document.getElementById('hsm'),rb:document.getElementById('rb'),me:document.getElementById('me'),mh:document.getElementById('mh')};
this.score=0;this.time=0;this.tc=0;this.ic=0;this.hs=0;this.state='active';
this.pos={x:0,y:0};this.size={w:0,h:0};this.bounds={w:0,h:0};
this.stats={c:30,e:100,d:20};this.moving=false;this.speed=25;this.cost=.6;
this.rc=0;this.rr=8;this.dists=[];this.max=5;this.ct=0;
this.tasks=[{t:'Find tacos! TACOS!',type:'taco',p:100},{t:'Collect rubber piggies',type:'rubber',p:80},{t:'Chase shiny things',type:'shiny',p:60},{t:'Eat waffles',type:'waffles',p:90},{t:'Dance with anything!',type:'any',p:50}];
this.cm=false;this.ctimer=0;this.mct=10;this.cch=[];this.disguised=false;this.lst=0;
this.quotes={g:["I'M GONNA SING THE DOOM SONG!",'Ooh! What does THIS button do?','WHEEE!'],t:['TACOS! I NEED TACOS!','TACOS! YES! MORE TACOS!'],p:['RUBBER PIGGY! *SQUEAKS*','I LOVE YOU, RUBBER PIGGY!'],c:['I MADE MASHED POTATOES!','MAXIMUM CHAOS!'],tired:['*yawn* I\'m getting sleepy...','Need... to... rest...'],rest:['*peaceful robot snoring*','Dreaming of tacos...']};
this.lut=0;this.af=null;this.joystickActive=false;this.moveInterval=null;this.isMobile=('ontouchstart' in window);this.uiVisible=true;
this.init()}
init(){this.loadHS();this.updateBounds();this.updateGirSize();setTimeout(()=>{this.posG()},100);this.setupEvents();this.createStars();this.updateTasks();this.startLoop();this.startSpawn();this.startTimer();this.updateUI()}
loadHS(){this.hs=window.ghs||0;this.ui.hs.textContent=this.hs}
saveHS(){if(this.score>this.hs){this.hs=this.score;window.ghs=this.hs;this.ui.hs.textContent=this.hs;return true}return false}
updateBounds(){const r=this.gc.getBoundingClientRect();this.bounds.w=r.width;this.bounds.h=r.height}
updateGirSize(){const cs=window.getComputedStyle(this.g);this.size.w=parseInt(cs.width);this.size.h=parseInt(cs.height)}
posG(){if(this.pos.x===0&&this.pos.y===0){this.pos.x=Math.max(this.size.w,(this.bounds.w-this.size.w)/2);this.pos.y=Math.max(this.size.h,(this.bounds.h-this.size.h)/2)}this.pos.x=Math.max(0,Math.min(this.pos.x,this.bounds.w-this.size.w));this.pos.y=Math.max(0,Math.min(this.pos.y,this.bounds.h-this.size.h));this.g.style.left=this.pos.x+'px';this.g.style.top=this.pos.y+'px'}
createStars(){for(let i=0;i<20;i++){const s=document.createElement('div');s.className='stars';s.style.left=Math.random()*100+'%';s.style.top=Math.random()*100+'%';s.style.animationDelay=Math.random()*2+'s';this.gc.appendChild(s)}}
setupEvents(){if(!this.isMobile){this.g.addEventListener('click',e=>{e.preventDefault();this.dance()});document.addEventListener('keydown',e=>this.handleKey(e))}else{this.g.addEventListener('click',e=>{e.preventDefault();this.dance()});this.g.addEventListener('touchend',e=>{e.preventDefault();this.dance()})}this.setupMobile();window.addEventListener('resize',()=>{this.updateBounds();this.updateGirSize();this.posG()})}
handleKey(e){if(this.state==='game-over')return;let key=e.key.toLowerCase();if(this.stats.d>80&&Math.random()<0.15){const keys=['arrowup','arrowdown','arrowleft','arrowright'];key=keys[Math.floor(Math.random()*keys.length)];this.showFeedback('Distracted!','#fa0')}switch(key){case 'arrowup':e.preventDefault();this.moveG(0,-this.speed);break;case 'arrowdown':e.preventDefault();this.moveG(0,this.speed);break;case 'arrowleft':e.preventDefault();this.moveG(-this.speed,0);break;case 'arrowright':e.preventDefault();this.moveG(this.speed,0);break;case ' ':e.preventDefault();this.randAction();break;case 'd':e.preventDefault();this.toggleDisguise();break;case 'r':e.preventDefault();this.toggleRest();break}}
setupMobile(){const jc=document.getElementById('jc'),js=document.getElementById('js'),ab=document.getElementById('ab'),db=document.getElementById('db'),rb=document.getElementById('rb'),tb=document.getElementById('tb');const cx=jc.offsetWidth/2,cy=jc.offsetHeight/2,md=35;let startPos={x:0,y:0};const hs=e=>{if(this.state==='game-over')return;e.preventDefault();e.stopPropagation();this.joystickActive=true;const r=jc.getBoundingClientRect(),t=e.touches?e.touches[0]:e;startPos.x=t.clientX-r.left;startPos.y=t.clientY-r.top;jc.style.opacity='1';this.startJoystickMovement()};const hm=e=>{if(!this.joystickActive||this.state==='game-over')return;e.preventDefault();e.stopPropagation();const r=jc.getBoundingClientRect(),t=e.touches?e.touches[0]:e,x=t.clientX-r.left-cx,y=t.clientY-r.top-cy,d=Math.sqrt(x*x+y*y);let fx=x,fy=y;if(d>md){const a=Math.atan2(y,x);fx=Math.cos(a)*md;fy=Math.sin(a)*md}js.style.transform=`translate(${fx}px,${fy}px)`;this.joystickVector={x:fx/md,y:fy/md}};const he=e=>{e.preventDefault();e.stopPropagation();this.joystickActive=false;js.style.transform='translate(0px,0px)';jc.style.opacity='.8';this.joystickVector={x:0,y:0};this.stopJoystickMovement()};jc.addEventListener('touchstart',hs,{passive:false});jc.addEventListener('touchmove',hm,{passive:false});jc.addEventListener('touchend',he,{passive:false});jc.addEventListener('mousedown',hs);document.addEventListener('mousemove',hm);document.addEventListener('mouseup',he);this.joystickVector={x:0,y:0};const bp=e=>{e.preventDefault();e.stopPropagation()};const toggleUI=()=>{this.uiVisible=!this.uiVisible;const ui=document.querySelector('.ui'),tl=document.querySelector('.tl'),btn=tb.querySelector('.btn');if(this.uiVisible){ui.style.display='block';tl.style.display='block';btn.textContent='üëÅÔ∏è';btn.style.background='rgba(50,50,0,.8)';btn.style.borderColor='#aa0';btn.style.color='#aa0'}else{ui.style.display='none';tl.style.display='none';btn.textContent='üëÄ';btn.style.background='rgba(100,0,0,.8)';btn.style.borderColor='#a00';btn.style.color='#a00'}};['click','touchend'].forEach(evt=>{tb.addEventListener(evt,e=>{bp(e);toggleUI()},{passive:false});ab.addEventListener(evt,e=>{bp(e);this.dance()},{passive:false});db.addEventListener(evt,e=>{bp(e);this.toggleDisguise()},{passive:false});rb.addEventListener(evt,e=>{bp(e);this.toggleRest()},{passive:false})})}
startJoystickMovement(){if(this.moveInterval)clearInterval(this.moveInterval);this.moveInterval=setInterval(()=>{if(this.joystickActive&&this.joystickVector&&(Math.abs(this.joystickVector.x)>.1||Math.abs(this.joystickVector.y)>.1)){const baseSpeed=this.disguised?this.speed*0.6:this.speed;let mx=this.joystickVector.x*baseSpeed,my=this.joystickVector.y*baseSpeed;if(this.stats.d>80&&Math.random()<0.2){mx*=-1;my*=-1}this.moveG(mx,my)}},50)}
stopJoystickMovement(){if(this.moveInterval){clearInterval(this.moveInterval);this.moveInterval=null}}
moveG(dx,dy){if(this.state!=='active')return;if(this.stats.e<=0){this.gameOver();return}const moveSpeed=this.disguised?0.6:1;let nx=this.pos.x+(dx*moveSpeed),ny=this.pos.y+(dy*moveSpeed);if(this.stats.d>60){const inaccuracy=Math.random()*10-5;nx+=inaccuracy;ny+=inaccuracy}if(this.stats.c>70&&Math.random()<0.3){const chaosX=(Math.random()-0.5)*15;const chaosY=(Math.random()-0.5)*15;nx+=chaosX;ny+=chaosY}nx=Math.max(0,Math.min(nx,this.bounds.w-this.size.w));ny=Math.max(0,Math.min(ny,this.bounds.h-this.size.h));if(nx!==this.pos.x||ny!==this.pos.y){this.pos.x=nx;this.pos.y=ny;this.g.style.left=nx+'px';this.g.style.top=ny+'px';const energyCost=this.disguised?this.cost*0.6:this.cost;this.modStats({e:-energyCost});this.checkCol()}}
toggleRest(){if(this.state==='game-over')return;if(this.state==='resting'){this.state='active';this.g.classList.remove('resting');this.showSpeech('Refreshed!');this.rc=20;this.showFeedback('Ready to go!','#0f0')}else if(this.rc<=0){this.state='resting';this.g.classList.add('resting');this.sayQuote('rest');this.showFeedback('Resting...','#08f')}else{this.showFeedback(`Rest cooldown: ${Math.ceil(this.rc)}s`,'#fa0')}}
dance(){if(this.state!=='active')return;if(this.stats.e<=0){this.gameOver();return}this.g.style.animation='gb .5s ease-in-out 3';if(this.disguised){this.sayQuote('g');this.modStats({c:3,e:-4});this.score+=8;this.showSpeech('*Dog spinning in circles*')}else{this.sayQuote('g');this.modStats({c:8,e:-6});this.score+=5}setTimeout(()=>{this.g.style.animation=''},1500)}
randAction(){if(this.state!=='active')return;if(this.stats.e<=0){this.gameOver();return}const normalActs=[()=>{const rx=(Math.random()-.5)*100,ry=(Math.random()-.5)*100;this.moveG(rx,ry);this.sayQuote('g')},()=>{this.modStats({c:15,e:-4});this.showSpeech('WHEEE!');this.score+=10},()=>{this.modStats({d:15,e:-3});this.showSpeech('Ooh! What\'s that?!')},()=>{if(this.stats.c>70&&Math.random()>.6)this.enterChaos();else{this.sayQuote('c');this.modStats({e:-2})}}];const dogActs=[()=>{const rx=(Math.random()-.5)*60,ry=(Math.random()-.5)*60;this.moveG(rx,ry);this.showSpeech('*Normal dog walking*')},()=>{this.modStats({c:5,e:-2});this.showSpeech('Woof! Very dog behavior!');this.score+=15},()=>{this.modStats({d:5,e:-2});this.showSpeech('I am dog! Not robot!')},()=>{this.modStats({c:-5,e:1});this.showSpeech('*Dog panting noises*');this.score+=10}];const acts=this.disguised?dogActs:normalActs;acts[Math.floor(Math.random()*acts.length)]()}
toggleDisguise(){if(this.state==='game-over')return;this.disguised=!this.disguised;this.g.classList.toggle('disguise');if(this.disguised){this.showSpeech('I\'M A PERFECTLY NORMAL DOG!');this.modStats({d:-15,c:-10});this.showFeedback('DOG MODE!','#08f')}else{this.showSpeech('*ROBOT NOISES*');this.modStats({c:5});this.showFeedback('CHAOS MODE!','#f80')}}
sayQuote(cat='g'){const now=Date.now();if(now-this.lst<500)return;this.lst=now;const qs=this.quotes[cat]||this.quotes.g,q=qs[Math.floor(Math.random()*qs.length)];this.showSpeech(q)}
modStats(changes){for(const[stat,change]of Object.entries(changes)){if(this.stats.hasOwnProperty(stat.charAt(0))){this.stats[stat.charAt(0)]=Math.max(0,Math.min(100,this.stats[stat.charAt(0)]+change))}}if(this.stats.e<=0&&this.state!=='game-over'&&this.state!=='resting'){this.stats.e=0;this.gameOver()}}
gameOver(){this.state='game-over';this.g.classList.add('game-over');this.stopJoystickMovement();if(this.af)cancelAnimationFrame(this.af);this.ui.fs.textContent=this.score;const nhs=this.saveHS();if(nhs)this.ui.hsm.innerHTML='<div class="nhs">üéâ NEW HIGH SCORE! üéâ</div>';else this.ui.hsm.innerHTML=`<div>High Score: ${this.hs}</div>`;this.ui.gos.style.display='flex'}
startSpawn(){const spawn=()=>{if(this.dists.length<this.max&&this.state==='active'){const types=['taco','shiny','rubber','waffles'],type=types[Math.floor(Math.random()*types.length)];this.createDist(type)}const br=3000,cm=this.stats.c/100*2000,ns=br-cm+Math.random()*2000;setTimeout(spawn,Math.max(1000,ns))};setTimeout(spawn,2000)}
createDist(type){const d=document.createElement('div');d.className=`dist ${type}`;const m=60,x=m+Math.random()*(this.bounds.w-120-m),y=m+Math.random()*(this.bounds.h-120-m);d.style.left=x+'px';d.style.top=y+'px';this.gc.appendChild(d);const cs=window.getComputedStyle(d);const dd={element:d,type:type,x:x,y:y,w:parseInt(cs.width),h:parseInt(cs.height)};this.dists.push(dd);setTimeout(()=>{this.removeDist(dd)},12000+Math.random()*8000)}
removeDist(dd){if(dd.element.parentNode)dd.element.remove();this.dists=this.dists.filter(d=>d!==dd)}
interact(dd){if(this.state!=='active')return;this.removeDist(dd);const currentMission=this.tasks[this.ct];const isCorrectItem=currentMission.type==='any'||currentMission.type===dd.type;const ints={taco:{p:20,s:{c:25,e:15,d:-5},sp:'TACOS! YES!',cc:.4,ds:{c:15,e:20,d:-10},dsp:'Dog loves tacos too!',dcc:.1},shiny:{p:12,s:{c:10,e:-3,d:20},sp:'SHINY!',eff:'distracted',cc:0,ds:{c:3,e:5,d:5},dsp:'Shiny thing! Dogs like shiny!',deff:null,dcc:0},rubber:{p:25,s:{c:20,e:10,d:10},sp:'RUBBER PIGGY!',eff:'hyperactive',cc:.3,ds:{c:10,e:15,d:0},dsp:'*Chews rubber piggy like dog*',deff:null,dcc:.1},waffles:{p:18,s:{c:8,e:20,d:-8},sp:'Waffles!',cc:0,ds:{c:3,e:25,d:-15},dsp:'Good dog food! Woof!',dcc:0}};const int=ints[dd.type];if(!int)return;const isDisguised=this.disguised;if(!isCorrectItem){const energyPenalty=isDisguised?8:12;this.modStats({e:-energyPenalty,c:10,d:8});this.showFeedback(`Wrong item! -${energyPenalty} energy!`,'#f44');return}const stats=isDisguised?int.ds:int.s;const speech=isDisguised?int.dsp:int.sp;const effect=isDisguised?(int.deff||null):int.eff;const chaosChance=isDisguised?int.dcc:int.cc;const points=isDisguised?Math.floor(int.p*1.2):int.p;this.score+=points;this.ic++;this.modStats(stats);this.showSpeech(speech);this.showFeedback(`+${points}!`,isDisguised?'#08f':'#0f0');if(effect==='distracted'){this.g.classList.add('distracted');setTimeout(()=>this.g.classList.remove('distracted'),2500)}else if(effect==='hyperactive'){this.g.classList.add('hyperactive');setTimeout(()=>this.g.classList.remove('hyperactive'),3500)}if(Math.random()<chaosChance)setTimeout(()=>this.enterChaos(),1000);this.checkTask(dd.type)}
checkTask(it){const ct=this.tasks[this.ct];let comp=ct.type==='any'||ct.type===it;if(comp){this.score+=ct.p;this.tc++;this.showFeedback(`+${ct.p}`,'#ff0');this.showSpeech('MISSION COMPLETE!');this.ct=(this.ct+1)%this.tasks.length;this.updateTasks();this.modStats({e:15,c:-5})}}
updateTasks(){const c=this.ui.tkc;c.innerHTML='';const missionEmojis={taco:'üåÆ',rubber:'üêñ',shiny:'‚ú®',waffles:'üßá',any:'üíÉ'};const currentTask=this.tasks[this.ct];const currentEmoji=missionEmojis[currentTask.type]||'üåÆ';this.ui.me.textContent=currentEmoji;this.ui.mh.textContent=currentEmoji;for(let i=0;i<3;i++){const ti=(this.ct+i)%this.tasks.length,t=this.tasks[ti],td=document.createElement('div');td.className='task';td.textContent=t.t;if(i===0){td.classList.add('current');td.textContent+=` (${t.p}pts)`}c.appendChild(td)}}
checkCol(){if(this.state!=='active')return;const gb={l:this.pos.x,r:this.pos.x+this.size.w,t:this.pos.y,b:this.pos.y+this.size.h};this.dists.forEach(d=>{const db={l:d.x,r:d.x+d.w,t:d.y,b:d.y+d.h};if(!(gb.r<db.l||gb.l>db.r||gb.b<db.t||gb.t>db.b))this.interact(d)})}
enterChaos(){if(this.cm||this.state!=='active')return;this.cm=true;this.ctimer=this.mct;this.ui.cm2.style.display='flex';const hcc=e=>{e.preventDefault();e.stopPropagation();this.ctimer=Math.max(0,this.ctimer-1);this.modStats({c:-3});this.score+=5;const act=document.querySelector('.ca');act.style.transform='scale(1.05)';setTimeout(()=>{act.style.transform='scale(1)'},100);if(this.ctimer<=0)setTimeout(()=>this.exitChaos(),200)};this.ui.cm2.addEventListener('click',hcc);this.ui.cm2.addEventListener('touchend',hcc);this.cch=[hcc]}
updateChaos(){if(!this.cm)return;this.ui.ct2.textContent=Math.ceil(this.ctimer);const pp=this.ctimer/this.mct*100;this.ui.cpf.style.width=pp+'%';const te=this.ui.ct2;if(this.ctimer<=2){te.style.color='#f04';te.style.animation='blink .5s infinite'}else if(this.ctimer<=5){te.style.color='#ff0';te.style.animation='none'}else{te.style.color='#0f0';te.style.animation='none'}const dl=Math.floor((this.mct-this.ctimer)/2)+1;this.ui.ds.textContent='"'+'Doom '.repeat(dl)+'..."'}
exitChaos(){this.cm=false;this.ui.cm2.style.display='none';this.cch.forEach(h=>{this.ui.cm2.removeEventListener('click',h);this.ui.cm2.removeEventListener('touchend',h)});this.cch=[];if(this.ctimer<=0){this.showSpeech('Better now!');this.modStats({c:-20,e:-10});this.showFeedback('Calmed!','#0f0');this.score+=50}else{this.showSpeech('Doom song over...');this.modStats({c:-30,e:-15})}}
showSpeech(msg){const now=Date.now();if(now-this.lst<500)return;this.lst=now;const sp=this.ui.gs;sp.textContent=msg;sp.style.display='block';setTimeout(()=>{sp.style.display='none'},3000)}
showFeedback(msg,col='#0f0'){const fb=document.createElement('div');fb.className='fp';fb.textContent=msg;fb.style.color=col;document.body.appendChild(fb);setTimeout(()=>{if(fb.parentNode)fb.remove()},2000)}
updateUI(){this.stats.c=Math.max(0,Math.min(100,this.stats.c));this.stats.e=Math.max(0,Math.min(100,this.stats.e));this.stats.d=Math.max(0,Math.min(100,this.stats.d));this.ui.cm.style.width=this.stats.c+'%';this.ui.em.style.width=this.stats.e+'%';this.ui.dm.style.width=this.stats.d+'%';if(this.stats.c>=90){this.ui.cm.style.background='linear-gradient(90deg,#f84,#f04,#f84)';this.ui.cm.style.animation='blink .5s infinite'}else if(this.stats.c>=70){this.ui.cm.style.background='linear-gradient(90deg,#f84,#f48,#f8c)';this.ui.cm.style.animation='none'}else{this.ui.cm.style.background='linear-gradient(90deg,#f04,#f48,#f8c)';this.ui.cm.style.animation='none'}if(this.stats.d>=80){this.ui.dm.style.background='linear-gradient(90deg,#f84,#fa0,#f84)';this.ui.dm.style.animation='blink .8s infinite'}else if(this.stats.d>=60){this.ui.dm.style.background='linear-gradient(90deg,#fa0,#ff4,#fa8)';this.ui.dm.style.animation='none'}else{this.ui.dm.style.background='linear-gradient(90deg,#ff0,#ff4,#ff8)';this.ui.dm.style.animation='none'}this.ui.sc.textContent=this.score;this.ui.tc.textContent=this.tc;this.ui.ic.textContent=this.ic;let statusText=this.disguised?'üêï Dog Mode':'Active';if(this.stats.c>=90)statusText+=' üå™Ô∏è CRITICAL!';else if(this.stats.c>=70)statusText+=' ‚ö° Chaotic';if(this.stats.d>=80)statusText+=' üòµ ADHD!';else if(this.stats.d>=60)statusText+=' üòµ‚Äçüí´ Distracted';const sds={active:statusText,resting:'üò¥ Resting','game-over':'üíÄ Game Over'};this.ui.gst.textContent=sds[this.state];if(this.rc>0){this.ui.rb.textContent=Math.ceil(this.rc);this.ui.rb.classList.remove('av');this.ui.rb.style.background='rgba(100,100,100,.8)';this.ui.rb.style.borderColor='#888';this.ui.rb.style.color='#888'}else if(this.state==='resting'){this.ui.rb.textContent='üò¥';this.ui.rb.classList.add('av');this.ui.rb.style.background='rgba(0,100,200,.8)';this.ui.rb.style.borderColor='#08f';this.ui.rb.style.color='#08f'}else{this.ui.rb.textContent='üò¥';this.ui.rb.classList.remove('av');this.ui.rb.style.background='rgba(0,50,0,.8)';this.ui.rb.style.borderColor='#0f0';this.ui.rb.style.color='#0f0'}this.g.classList.toggle('hyperactive',this.stats.c>80&&this.state==='active');this.g.classList.toggle('distracted',this.stats.d>60&&this.state==='active');if(this.cm)this.updateChaos()}
startLoop(){const loop=ct=>{if(this.state==='game-over')return;if(ct-this.lut<16.67){this.af=requestAnimationFrame(loop);return}this.lut=ct;if(this.state==='active'){const chaosRate=this.disguised?-.25:-.15;const distractRate=this.disguised?-.2:-.1;let energyDrain=-.01;if(this.stats.c>90)energyDrain=-.25;else if(this.stats.c>80)energyDrain=-.15;else if(this.stats.c>70)energyDrain=-.08;this.modStats({c:chaosRate,e:energyDrain,d:distractRate});if(this.stats.c>=100&&!this.cm){this.enterChaos();this.stats.c=90}if(this.stats.d>70&&Math.random()>.98){const rx=(Math.random()-.5)*40,ry=(Math.random()-.5)*40;this.moveG(rx,ry);this.showSpeech('Ooh! Distracted!');}if(this.stats.c>80&&Math.random()>.995){const rx=(Math.random()-.5)*60,ry=(Math.random()-.5)*60;this.moveG(rx,ry);this.showSpeech('Chaos impulse!');}if(this.stats.d>80&&Math.random()>.992){this.randAction();this.showSpeech('Wait, what was I doing?');}if(Math.random()>.9995){const rx=(Math.random()-.5)*60,ry=(Math.random()-.5)*60;this.moveG(rx,ry);this.showSpeech('What\'s there?')}if(Math.random()>.9998)this.sayQuote('g')}else if(this.state==='resting'){const restRate=this.stats.e<20?this.rr*2:this.rr;this.modStats({e:restRate/60,c:-.4,d:-.3});if(Math.random()>.999)this.sayQuote('rest')}if(this.cm){this.ctimer-=.016;if(this.ctimer<=0)this.exitChaos()}if(this.rc>0)this.rc-=.016;this.updateUI();this.af=requestAnimationFrame(loop)};this.af=requestAnimationFrame(loop)}
startTimer(){setInterval(()=>{if(this.state!=='game-over'){this.time++;this.ui.tm.textContent=this.time}},1000)}
}
function restart(){document.getElementById('gos').style.display='none';if(window.gg){if(window.gg.af)cancelAnimationFrame(window.gg.af);window.gg.stopJoystickMovement()}document.querySelectorAll('.dist').forEach(el=>el.remove());const g=document.getElementById('g');g.classList.remove('game-over','resting','hyperactive','distracted','disguise');window.gg=new G()}
window.addEventListener('load',()=>{window.gg=new G()});
</script>
</body>
</html>
